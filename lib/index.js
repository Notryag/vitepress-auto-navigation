"use strict";var e=require("fs"),t=require("path");function r(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var i=r(e),n=r(t);const a=e=>({text:s(e.name),link:n.normalize(e.path).replace(/\\/g,"/")}),s=e=>e.replace(/\.[^/.]+$/,""),l=e=>e.endsWith(".md");function c(e,t=1,r={}){const a=i.readdirSync(e),o=[];return a.forEach((a=>{const u=n.join(e,a).toString().replace(/\\/g,"/");if(i.statSync(u).isDirectory()){let i={name:a,path:u,isDirectory:!0,level:t,parentPath:e};o.push(i);const n=c(u,t+1,r);o.push(...n),r[u]=i}else if(l(a)){let i={name:s(a),path:u,level:t,isDirectory:!1,parentPath:e};o.push(i),r[u]=i}})),o.sort(((e,t)=>e.level!==t.level?e.level-t.level:t.isDirectory?1:-1))}module.exports=function(e={baseurl:"./blog"}){let t={};const r=c(e.baseurl,1,t);let i=[];const n={};r.filter((e=>e.isDirectory&&1==e.level)).map((e=>{e.items=[],r.forEach((t=>{t.parentPath===e.path&&((e,t,r)=>{e[t.path]||(e[t.path]=[{text:"other",items:[]}]),r.isDirectory?e[t.path].push({text:r.name,items:[]}):e[t.path][0].items.push({text:r.name,link:a(r).link})})(n,e,t)}))})),Object.entries(n).map((([e,t])=>{r.forEach((r=>{if(r.path.includes(e)&&!r.isDirectory){let e=t.findIndex((e=>r.path.includes(e.text)));if(-1===e)return;t[e].items.push(a(r))}}))}));for(const[e,r]of Object.entries(n))n[e]=r.filter((e=>e.items.length>0)),i.push({text:t[e].name,items:r.reduce(((e,t)=>{let r=t.items[0];return r?(e.push({text:"other"===t.text?r.text:t.text,link:r.link}),e):e}),[])});return{nav:i,sidebar:n}};
